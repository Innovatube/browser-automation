<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <meta name="theme-color" content="#4F7DC9">
    <meta charset="UTF-8">
    <meta http-equiv="expires" content="timestamp">
    <title>Web-automation-test</title>
    <link rel="icon" href="favicon.ico">
    <link rel="import" href="elements/codelab.html">

    <style>
        body {
            font-family: "Roboto", sans-serif;
        }
    </style>
</head>

<body unresolved class="fullbleed">
<google-codelab title="Web automation with Selenium" environment="web" feedback-link="">

<google-codelab-step label="Automated tests for Web Apps">
      <h2>What are automated tests for Web Apps?</h2>
      <p>Well, it looks like this! A picture worths a thousand words!<br>
      A video worths millions!</p>

      <aside class="warning">Remember to view in full-screen by clicking the small icon at the bottom-right corner</aside>
      <video style="width: 100%;" controls><source src="img/signup-test.webm" type="video/webm"></video>

      <h2>Test Automation for Web Apps - Why/When/How</h2>

      <h3>Why</h3>
      <ul>
      <li>Frequent regression testing</li>
      <li>Rapid feedback to developers</li>
      <li>Virtually unlimited iterations of test case execution</li>
      <li>Support for Agile and extreme development methodologies</li>
      <li>Disciplined documentation of test cases</li>
      <li>Customized defect reporting</li>
      <li>Finding defects missed by manual testing</li>
      </ul>

      <h3>When </h3>
      <aside class="warning">It is NOT ALWAYS advantageous to automate test cases!! So when?</aside>
      <ul>
      <li>UI will change in the future</li>
      <li>Project is short of time => building automated tests eats time</li>
      <li>Some test cases is really hard to automate (feeling, readability, responsiveness, external function (send emails)</li>
      </ul>

      <h2>How - Introducing Selenium</h2>
      <h3>It is a set of different tools</h3>

      <img src="img/selenium-ide-logo.png" class="a1" style="padding-bottom: 15px">
      
      <div style="display:inline-block"><h2>Selenium IDE</h2>
      <ul>
      <li>Tool for recording and playing tests</li>
      <li>Translate recorded test into many programming languages</li>
      <li>For Firefox only</li>
      </ul></div><br>

      <img src="img/selenium-rc-logo.png" class="a1" style="padding-bottom:35px">

      <div style="display:inline-block">
      <h2>Selenium Remote Control (Selenium 1)</h2>
      <ul>
      <li>Based on JavaScript injection</li>
      <li>Support all browsers</li>
      <li>Limited function due to JavaScript security  restriction</li>
      <li>Outdated</li>
      </ul></div><br>

      <img src="img/webdriver.png" class="a1" style="padding-bottom:50px">
      <div style="display:inline-block">
      <h2>Selenium WebDriver (Selenium 2)</h2>
      <ul>
      <li>Based on calling browsers' API</li>
      <li>Support some certain browsers</li>
      <li>Faster execution due to native calls</li>
      <li>Backward compatibility with Selenium 1</li>
      </ul></div><br>

      <img src="img/selenium-grid-logo.png" class="a1" style="padding-bottom:3px">
      <div style="display:inline-block">
      <h2>Selenium Grid</h2>
      <ul>
      <li>Scale Selenium 1 solution</li>
      <li>Run test parallely on different machines</li>
      </ul></div>

      <h2>=> In this tutorial we will use Selenium IDE and Selenium WebDriver to test FLOW Project website</h2>

</google-codelab-step>

<google-codelab-step label="Training materials">
      <aside style="font-size: 20px;" class="special">
      
      <p style="display: inline-block; min-width: 350px"><a href ="https://beta.flowzone.cloud/" ><img src="img/flow-logo.svg" style="width: 200px"><br>Website To Be Tested</a></p>
      <p style="display: inline-block;"><a href ="https://docs.google.com/spreadsheets/d/1JDifwRafpNojGTnAIs4jwgNMmYVh-7yjkivB6bOeQ8U/edit#gid=299622649">
      <img src="img/gsheet-icon.jpg" style="width: 80px"><br>Test Cases Specification</a></p>

      <p style="display: inline-block; min-width: 350px"><a href ="https://github.com/Innovatube/web-automation-test/"><img src="img/GitHub_Logo.png" style="width: 160px"><br>Project Repository</a></p>

      <p style="display: inline-block;"><a href ="http://www.seleniumhq.org/docs/"><img src="img/webdriver.png" style="width: 100px"><br>Selenium Docs</a></p>
      </aside>
</google-codelab-step>


<google-codelab-step label="Selenium IDE">
      <h2>Let's see it in action</h2>
      <p>We are going to use SeleniumIDE to test FLOW project website: </p>
      <ul>
      <li><a href = "https://beta.flowzone.cloud/">Website to be tested</a></li>
      <li><a href = "https://docs.google.com/spreadsheets/d/1JDifwRafpNojGTnAIs4jwgNMmYVh-7yjkivB6bOeQ8U/edit#gid=299622649">Manual test-cases specification: </a></li>
      </ul>

      <p>
      First, download SeleniumIDE <a href="https://addons.mozilla.org/en-US/firefox/addon/selenium-ide/"><img style="width: 40px" src="img/selenium-ide-logo.png"></a>
      <br><br>

      After that, download the project folder  <a href="https://github.com/Innovatube/web-automation-test/archive/master.zip"><img style="width: 73px; vertical-align: top" src="img/GitHub_Logo.png"></a>, and unzip the project folder
      <br><br>

      Open SeleniumIDE as below:
      <img src ="img/firefox0.png"><br>
      <img src ="img/firefox1.png">
      <br><br>

      <aside>Open the test suite, and choose the test suite in this address: <code><\FlowProjectTests_Selenese\Website\WebsiteFLOW</code></aside>
      <img src = "img/ide_openTestSuite.png"><br><br>

      Try modifying the speed and running the test:
      <img src="img/ide_runTest.png">

      <h2>Try selenium recording function</h2>
      <p>
      First pick one test case from <a href = "https://docs.google.com/spreadsheets/d/1JDifwRafpNojGTnAIs4jwgNMmYVh-7yjkivB6bOeQ8U/edit#gid=757219395">Flow project test-cases specification</a>
      <br><br>
      Now click the record button from the IDE and perform the actions you are suppose to do. Then click the button again to stop the record.
      <img src = "img/ide_record.png"><br><br></p>

      <h3>Try playing back to see the result!!</h3><br>

      <h2>Insert new commands</h2><br>
      <img src = "img/ide_insertCommand.png"><br><br>

      <h2>Using the element locator</h2><br>
      <img src = "img/ide_elementLocator.png"><br>

      <h3>Now save the test case using Ctrl + S</h3><br>
      
      <h2>Export/View test case in different formats:</h2>
      <img src = "img/ide_changeFormat.png"><br><br>
</google-codelab-step>



<google-codelab-step label="Selenese script">
      <p><i>
      Selenese is a simplified script that represent automated test cases, and is translatable to other programming languages</i>
      <h2>This is how it looks like</h2><br>

      <img src="img/3typeSelenese.png">

      There are three types of Selenese command: <b>Actions</b>, <b>Accessors</b>, and <b>Assertions</b><br>

      <h3>Actions</h3>
      <ul><li>
      Things like “click this link” and “select that option”. If an Action fails, or has an error, the execution of the current test is stopped.</li><li>
      
      Many Actions can be called with the “AndWait” suffix, e.g. “clickAndWait”. This suffix tells Selenium that the action will cause the browser to make a call to the server, and that Selenium should wait for a new page to load.</li></ul>

      <h3>Accessors</h3>
      <ul><li>
      Examine the state of the application and store the results in variables, e.g. “storeTitle”. They are also used to automatically generate Assertions. </li></ul>

      <h3>Assertions</h3>
      <ul><li>Verify that the state of the application conforms to what is expected. (E.g: “make sure the page title is X” and “verify that this checkbox is checked”)</li></ul>

      <h2>3 parts of a selenese command</h2><br>

      Selenium commands are simple, they consist of the command and two parameters. For example:<br><br>
      <img src="img/3partSelenese.png">

      <h2>Locating Elements</h2><br>
      How to provide the right value to the "Target" form. Let's look at this example code:
      <h3>Locating by Id</h3><br>
      <pre><code>&#x3C;html&#x3E;
 &#x3C;body&#x3E;
  &#x3C;form id=&#x22;loginForm&#x22;&#x3E;
   &#x3C;input name=&#x22;username&#x22; type=&#x22;text&#x22; /&#x3E;
   &#x3C;input name=&#x22;password&#x22; type=&#x22;password&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;submit&#x22; value=&#x22;Login&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;button&#x22; value=&#x22;Clear&#x22; /&#x3E;
  &#x3C;/form&#x3E;
 &#x3C;/body&#x3E;
&#x3C;html&#x3E;</code></pre>
      <code>id=loginForm</code><br>

      <h3>Locating by Name</h3>
      <pre><code>&#x3C;html&#x3E;
 &#x3C;body&#x3E;
  &#x3C;form id=&#x22;loginForm&#x22;&#x3E;
   &#x3C;input name=&#x22;username&#x22; type=&#x22;text&#x22; /&#x3E;
   &#x3C;input name=&#x22;password&#x22; type=&#x22;password&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;submit&#x22; value=&#x22;Login&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;button&#x22; value=&#x22;Clear&#x22; /&#x3E;
  &#x3C;/form&#x3E;
 &#x3C;/body&#x3E;
&#x3C;html&#x3E;</code></pre>

      <code>name=username <br>
      name=continue value=Clear <br>
      name=continue Clear <br>
      name=continue type=button <br>
      </code>

      <h3>Locating by Link Text</h3><br>
      <pre><code>&#x3C;html&#x3E;
 &#x3C;body&#x3E;
  &#x3C;p&#x3E;Are you sure you want to do this?&#x3C;/p&#x3E;
  &#x3C;a href=&#x22;continue.html&#x22;&#x3E;Continue&#x3C;/a&#x3E;
  &#x3C;a href=&#x22;cancel.html&#x22;&#x3E;Cancel&#x3C;/a&#x3E;
&#x3C;/body&#x3E;
&#x3C;html&#x3E;</code></pre>
      <code>link=Continue <br>
      link=Cancel <br></code><br>

      <h3>Locating by Identifiers</h3>
      <pre><code>&#x3C;html&#x3E;
 &#x3C;body&#x3E;
  &#x3C;form id=&#x22;loginForm&#x22;&#x3E;
   &#x3C;input name=&#x22;username&#x22; type=&#x22;text&#x22; /&#x3E;
   &#x3C;input name=&#x22;password&#x22; type=&#x22;password&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;submit&#x22; value=&#x22;Login&#x22; /&#x3E;
  &#x3C;/form&#x3E;
 &#x3C;/body&#x3E;
&#x3C;html&#x3E;</code></pre>
      <aside class="special">[identifiers] = [id] OR [name] OR [otherUniqueValue]</aside>
      <code>identifier=loginForm <br>
      identifier=password <br>
      identifier=continue <br>
      continue</code><br>

      <h3>Locating by XPath</h3>
      <pre><code>&#x3C;html&#x3E;
 &#x3C;body&#x3E;
  &#x3C;form id=&#x22;loginForm&#x22;&#x3E;
   &#x3C;input name=&#x22;username&#x22; type=&#x22;text&#x22; /&#x3E;
   &#x3C;input name=&#x22;password&#x22; type=&#x22;password&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;submit&#x22; value=&#x22;Login&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;button&#x22; value=&#x22;Clear&#x22; /&#x3E;
  &#x3C;/form&#x3E;
 &#x3C;/body&#x3E;
&#x3C;html&#x3E;</code></pre>
      <ul class="simple">
      
      <li><code>xpath=/html/body/form[1]</code> - <em>Absolute path (would break if the HTML was
      changed only slightly)</em></li>
      <li><code>//form[1]</code> - <em>First form element in the HTML</em></li>
      <li><code>xpath=//form[@id='loginForm']</code> - <em>The form element with attribute named ‘id’ and the value ‘loginForm’</em></li>
      <li><code>xpath=//form[input/@name='username']</code> - <em>First form element with an input child
      element with attribute named ‘name’ and the value ‘username’</em></li>
      <li><code>//input[@name='username']</code> - <em>First input element with attribute named ‘name’ and the value
      ‘username’</em></li>
      <li><code>//form[@id='loginForm']/input[1]</code> - <em>First input child element of the
      form element with attribute named ‘id’ and the value ‘loginForm’</em></li>
      <li><code>//input[@name='continue'][@type='button']</code> - <em>Input with attribute named ‘name’ and the value ‘continue’
      and attribute named ‘type’ and the value ‘button’</em></li>
      <li><code>//form[@id='loginForm']/input[4]</code> - <em>Fourth input child element of the
      form element with attribute named ‘id’ and value ‘loginForm’</em></li>
      </ul>


      <h3>Locating by DOM</h3><br>
      <pre><code>&#x3C;html&#x3E;
 &#x3C;body&#x3E;
  &#x3C;form id=&#x22;loginForm&#x22;&#x3E;
   &#x3C;input name=&#x22;username&#x22; type=&#x22;text&#x22; /&#x3E;
   &#x3C;input name=&#x22;password&#x22; type=&#x22;password&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;submit&#x22; value=&#x22;Login&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;button&#x22; value=&#x22;Clear&#x22; /&#x3E;
  &#x3C;/form&#x3E;
 &#x3C;/body&#x3E;
&#x3C;html&#x3E;</code></pre>
      
      <code>
      dom=document.getElementById('loginForm')<br>
      dom=document.forms['loginForm'] <br>
      dom=document.forms[0] <br>
      document.forms[0].username <br>
      document.forms[0].elements['username'] <br>
      document.forms[0].elements[0] <br>
      document.forms[0].elements[3] <br>
      </code>

      <h3>Locating by CSS</h3><br>
      <pre><code>&#x3C;html&#x3E;
 &#x3C;body&#x3E;
  &#x3C;form id=&#x22;loginForm&#x22;&#x3E;
   &#x3C;input name=&#x22;username&#x22; type=&#x22;text&#x22; /&#x3E;
   &#x3C;input name=&#x22;password&#x22; type=&#x22;password&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;submit&#x22; value=&#x22;Login&#x22; /&#x3E;
   &#x3C;input name=&#x22;continue&#x22; type=&#x22;button&#x22; value=&#x22;Clear&#x22; /&#x3E;
  &#x3C;/form&#x3E;
 &#x3C;/body&#x3E;
&#x3C;html&#x3E;</code></pre>

      <code>
      css=form#loginForm  <br>
      css=input[name="username"]  <br>
      css=input.required[type="text"]  <br>
      css=input.passfield  <br>
      css=#loginForm input[type="button"]  <br>
      css=#loginForm input:nth-child <br>
      </code><br>

      <h2>Matching Text Patterns</h2>
      There are selenium commands which require <i>patterns</i> insteadOf <i>locators</i>, for example: <code><b>verifyTextPresent</b></code>, <code><b>verifyTitle</b></code>, <code><b>verifyAlert</b></code>, <code><b>assertConfirmation</b></code>, <code><b>verifyText</b></code>, and <code><b>verifyPrompt</b></code>.
      <h3>How to provide the right "Value" for text-related command: </h3>
      To be short: using exact value or regular expression!! Example: <br>

      <table border="1" class="docutils">
      <colgroup>
      <col width="24%">
      <col width="64%">
      <col width="12%">
      </colgroup>
      <thead valign="bottom">
      <tr class="row-odd"><th class="head"><strong>Command</strong></th>
      <th class="head"><strong>Target</strong></th>
      <th class="head"><strong>Value</strong></th>
      </tr>
      </thead>
      <tbody valign="top">
      <tr class="row-even"><td>open</td>
      <td><a class="reference external" href="http://weather.yahoo.com/forecast/USAK0012.html">http://weather.yahoo.com/forecast/USAK0012.html</a></td>
      <td>&nbsp;</td>
      </tr>
      <tr class="row-odd"><td>verifyTextPresent</td>
      <td>regexp:Sunrise: *[0-9]{1,2}:[0-9]{2} [ap]m</td>
      <td>&nbsp;</td>
      </tr>
      </tbody>
      </table><br>

      <h2>Using JavaScript inside Selenese</h2>
      Let's look at this example below. There's some command require a <b><i>script</i></b> as its parameter!!
      <img src ="img/se_javascript.png">
      </p>
</google-codelab-step>


<google-codelab-step label="Selenium WebDriver (NodeJS)">
      <h2>Ok, let's just install NodeJS first and then WebDriver introduction will come in the mean time...</h2><br>
      <p>
      WebDriver is designed to provide a simpler, more concise programming interface in addition to addressing some limitations in the Selenium-RC API. WebDriver’s goal is to supply a well-designed object-oriented API that provides improved support for modern advanced web-app testing problems.
      </p>

      <img style="max-width: 300px; display: inline-block;" src="img/3way.jpg">
      <img style="max-width: 300px; display: inline-block;" src="img/2way.jpg">

      <h3>Let's try writting and running some code  before introducing stuffs</h3>
      Now read the manual on the web-automation-test repository to install the environment and start the demo test script

      <aside class="warning">
            Make sure you have NodeJS on your system before you begin. It can be downloaded <a href="https://nodejs.org/en/">here: </a>
      </aside>

      <aside class="special">
            Step 1: Clone the project repository and install the dependencies
      </aside>
      <br>
      <img src="img/project_folder.gif"><br>
      <p>This is the lazy code:</p>
      
      <pre>git clone https://github.com/Innovatube/web-automation-test.git<br>cd web-automation-test<br>npm install</pre>
      
      <br>
      <aside class="special">
            Step 2: Add Chrome and Firefox WebDriver to your system environment variable:
      </aside>
      <ul style="width: 300px; display: inline-block; vertical-align: middle; padding-right: 30px"><li>
            Copy this path:<code>&#x3C;your project folder&#x3E;/DriverServer</li></code><br><li>
            
            Click on the <img style="width: 30px" src="img/windows_icon.png"> icon<br><br><li>

            Search <i>"environment variable"</i>, then press Enter<br><br><li>

            Choose the <code>PATH</code> environment variable, and add the copied path to it
      </li><br><br></li></li></ul>

      <img src="img/add-driver-server.gif" style="display: inline-block; width: 250px; vertical-align: middle">

      <br><br>
      <aside class="special">
            Step 3: Open the project folder and examine the structure of the project:
      </aside>
      <img src="img/folder-structure.png">

      <aside class="special">
            Step 4: Now open flowProject.js 
      </aside>

      <p>Look at the code, below are the breakdowns of it: <br>
      <i>1: Initialization of dependencies</i></p>
      <pre><code>var webdriver = require(&#x27;selenium-webdriver&#x27;),
&#x9;By = webdriver.By,
&#x9;fs = require(&#x27;fs&#x27;),
&#x9;path = require(&#x27;path&#x27;);

var rootPath = path.normalize(__dirname );
var testDir = rootPath + &#x27;/JSTests&#x27;;</code></pre>

      <p><i>2: Load all tests in folder JSTests</i><br>
      After this, all test object will be loaded into the array <code>testCases</code></p>

      <pre><code>var testCases = [];
fs.readdirSync(testDir).forEach(function(file) {
    if (file.indexOf(&#x27;.js&#x27;) &#x3E;= 0) {
        testCases.push(
        &#x9;require(testDir + &#x27;/&#x27; + file)(webdriver));
        console.log(&#x27;Loaded: &#x27; + file);
    }
})</code></pre>

      <p><i>3: Create a driver instance, then invoke all the test cases and run them with the driver provided</i><br></p>

            <pre><code>var driver = new webdriver.Builder().forBrowser(&#x27;firefox&#x27;).build();
driver.get(&#x27;https://beta.flowzone.cloud/&#x27;).then(()=&#x3E;{
&#x9;testCases.forEach((test)=&#x3E;{
&#x9;&#x9;test.run(driver);
&#x9;})
});</code></pre>
</google-codelab-step>

<google-codelab-step label="Vague test cases">
   <aside class="warning"> We may now think that our work will be much more easier with those automated testing tools that we have just studied. But in reality it is not that simple. Stay tuned!</aside>

   <p>Some test cases found in FLOW project are look-and-feel test that require human effort to decide whether or not the test is passed. Below are examples!</p><br>

   <aside class="special">How are we going to define an automated test for this case?</aside>
   <img src="img/testcase_ui.png">
   <p>
      <b>Solution 1:</b> Okay, we can use the Element Inspector to get the element id or name for different parts of the website.
      <img src="img/element_no_id.png"><br><br>
      <b style="font-size: 14px">Problem 1:</b>  But what if the part does not have an id or name? What if the UI is changing frequently in the future?
   </p>
   

   <p style="font-size: 16px;"><b>Solution 2:</b> Forget automated tests in these cases. We need humans!!.<br>
   </p>
   <aside class="special">Solution 2 seems reasonable, but can we do better?</aside>
   
   <p style="font-size: 20px"><u><b>Solution 3:</b> Define a better test case and syncronize frequently with the customer to best suit their needs! Provide necessary training to our human resource to fulfill this.</u>
   </p>

   <aside class="warning"><b> => There are bunches of vague test cases like this and we will have to change them now!</b></aside>

   <img src="img/testcase_web.png">
</google-codelab-step>


</google-codelab>
</body>
<style type="text/css">
   .a1{
         display: inline-block;
         max-width: 100px !important;
   }
</style>

</html>